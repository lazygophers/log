"use strict";(self.webpackChunklazygophers_log_docs=self.webpackChunklazygophers_log_docs||[]).push([["434"],{2538:function(e,n,r){r.r(n),r.d(n,{default:()=>d});var l=r(5893),s=r(65);function a(e){let n=Object.assign({h1:"h1",a:"a",h2:"h2",p:"p",ul:"ul",li:"li",h3:"h3",pre:"pre",code:"code",h4:"h4",strong:"strong",hr:"hr"},(0,s.ah)(),e.components);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n.h1,{id:"-api-documentation",children:["\uD83D\uDCDA API Documentation",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#-api-documentation",children:"#"})]}),"\n",(0,l.jsxs)(n.h2,{id:"概述",children:["概述",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#概述",children:"#"})]}),"\n",(0,l.jsx)(n.p,{children:"LazyGophers Log 提供了一个全面的日志记录 API，支持多日志级别、自定义格式化、异步写入和构建标签优化。本文档涵盖了所有公共 API、配置选项和使用模式。"}),"\n",(0,l.jsxs)(n.h2,{id:"目录",children:["目录",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#目录",children:"#"})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#%E6%A0%B8%E5%BF%83%E7%B1%BB%E5%9E%8B",children:"核心类型"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#logger-api",children:"Logger API"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#%E5%85%A8%E5%B1%80%E5%87%BD%E6%95%B0",children:"全局函数"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#%E6%97%A5%E5%BF%97%E7%BA%A7%E5%88%AB",children:"日志级别"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%99%A8",children:"格式化器"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#%E8%BE%93%E5%87%BA%E5%86%99%E5%85%A5%E5%99%A8",children:"输出写入器"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#%E4%B8%8A%E4%B8%8B%E6%96%87%E6%97%A5%E5%BF%97",children:"上下文日志"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#%E6%9E%84%E5%BB%BA%E6%A0%87%E7%AD%BE",children:"构建标签"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96",children:"性能优化"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#%E7%A4%BA%E4%BE%8B",children:"示例"})}),"\n"]}),"\n",(0,l.jsxs)(n.h2,{id:"核心类型",children:["核心类型",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#核心类型",children:"#"})]}),"\n",(0,l.jsxs)(n.h3,{id:"logger",children:["Logger",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#logger",children:"#"})]}),"\n",(0,l.jsx)(n.p,{children:"提供所有日志记录功能的主要日志记录器结构体。"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"type Logger struct {\n    // 包含用于线程安全操作的私有字段\n}\n"})}),"\n",(0,l.jsxs)(n.h4,{id:"构造函数",children:["构造函数",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#构造函数",children:"#"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"func New() *Logger\n"})}),"\n",(0,l.jsx)(n.p,{children:"创建一个具有默认配置的新日志记录器实例："}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["级别：",(0,l.jsx)(n.code,{children:"DebugLevel"})]}),"\n",(0,l.jsxs)(n.li,{children:["输出：",(0,l.jsx)(n.code,{children:"os.Stdout"})]}),"\n",(0,l.jsx)(n.li,{children:"格式化器：默认文本格式化器"}),"\n",(0,l.jsx)(n.li,{children:"调用者追踪：禁用"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"示例："})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'logger := log.New()\nlogger.Info("新日志记录器已创建")\n'})}),"\n",(0,l.jsxs)(n.h3,{id:"entry",children:["Entry",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#entry",children:"#"})]}),"\n",(0,l.jsx)(n.p,{children:"表示具有所有关联元数据的单个日志条目。"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"type Entry struct {\n    Time       time.Time     // 条目创建时的时间戳\n    Level      Level         // 日志级别\n    Message    string        // 日志消息\n    Pid        int          // 进程 ID\n    Gid        uint64       // Goroutine ID\n    TraceID    string       // 分布式追踪的追踪 ID\n    CallerName string       // 调用者函数名\n    CallerFile string       // 调用者文件路径\n    CallerLine int          // 调用者行号\n}\n"})}),"\n",(0,l.jsxs)(n.h2,{id:"logger-api",children:["Logger API",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#logger-api",children:"#"})]}),"\n",(0,l.jsxs)(n.h3,{id:"配置方法",children:["配置方法",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#配置方法",children:"#"})]}),"\n",(0,l.jsxs)(n.h4,{id:"setlevel",children:["SetLevel",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#setlevel",children:"#"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"func (l *Logger) SetLevel(level Level) *Logger\n"})}),"\n",(0,l.jsx)(n.p,{children:"设置最低日志级别。低于此级别的消息将被忽略。"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"参数："})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"level"}),"：要处理的最低日志级别"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"返回值："})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"*Logger"}),"：返回自身以支持方法链式调用"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"示例："})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'logger.SetLevel(log.InfoLevel)\nlogger.Debug("这不会被显示")  // 被忽略\nlogger.Info("这会被显示")    // 被处理\n'})}),"\n",(0,l.jsxs)(n.h4,{id:"setoutput",children:["SetOutput",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#setoutput",children:"#"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"func (l *Logger) SetOutput(writers ...io.Writer) *Logger\n"})}),"\n",(0,l.jsx)(n.p,{children:"设置日志消息的一个或多个输出目标。"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"参数："})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"writers"}),"：一个或多个 ",(0,l.jsx)(n.code,{children:"io.Writer"})," 输出目标"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"返回值："})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"*Logger"}),"：返回自身以支持方法链式调用"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"示例："})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'// 单一输出\nlogger.SetOutput(os.Stdout)\n\n// 多个输出\nfile, _ := os.Create("app.log")\nlogger.SetOutput(os.Stdout, file)\n'})}),"\n",(0,l.jsxs)(n.h4,{id:"setformatter",children:["SetFormatter",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#setformatter",children:"#"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"func (l *Logger) SetFormatter(formatter Format) *Logger\n"})}),"\n",(0,l.jsx)(n.p,{children:"设置日志输出的自定义格式化器。"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"参数："})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"formatter"}),"：实现 ",(0,l.jsx)(n.code,{children:"Format"})," 接口的格式化器"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"返回值："})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"*Logger"}),"：返回自身以支持方法链式调用"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"示例："})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"logger.SetFormatter(&JSONFormatter{})\n"})}),"\n",(0,l.jsxs)(n.h4,{id:"caller",children:["Caller",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#caller",children:"#"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"func (l *Logger) Caller(enabled bool) *Logger\n"})}),"\n",(0,l.jsx)(n.p,{children:"启用或禁用日志条目中的调用者信息。"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"参数："})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"enabled"}),"：是否包含调用者信息"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"返回值："})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"*Logger"}),"：返回自身以支持方法链式调用"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"示例："})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'logger.Caller(true)\nlogger.Info("这将包含文件:行号信息")\n'})}),"\n",(0,l.jsxs)(n.h4,{id:"setcallerdepth",children:["SetCallerDepth",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#setcallerdepth",children:"#"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"func (l *Logger) SetCallerDepth(depth int) *Logger\n"})}),"\n",(0,l.jsx)(n.p,{children:"设置包装日志记录器时调用者信息的堆栈深度。"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"参数："})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"depth"}),"：要跳过的堆栈帧数"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"返回值："})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"*Logger"}),"：返回自身以支持方法链式调用"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"示例："})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"func logWrapper(msg string) {\n    logger.SetCallerDepth(1).Info(msg)  // 跳过包装函数\n}\n"})}),"\n",(0,l.jsxs)(n.h4,{id:"setprefixmsg--setsuffixmsg",children:["SetPrefixMsg / SetSuffixMsg",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#setprefixmsg--setsuffixmsg",children:"#"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"func (l *Logger) SetPrefixMsg(prefix string) *Logger\nfunc (l *Logger) SetSuffixMsg(suffix string) *Logger\n"})}),"\n",(0,l.jsx)(n.p,{children:"为所有日志消息设置前缀或后缀文本。"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"参数："})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"prefix/suffix"}),"：要前置/后置到消息的文本"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"返回值："})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"*Logger"}),"：返回自身以支持方法链式调用"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"示例："})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'logger.SetPrefixMsg("[APP] ").SetSuffixMsg(" [END]")\nlogger.Info("Hello")  // 输出: [APP] Hello [END]\n'})}),"\n",(0,l.jsxs)(n.h3,{id:"日志记录方法",children:["日志记录方法",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#日志记录方法",children:"#"})]}),"\n",(0,l.jsx)(n.p,{children:"所有日志记录方法都有两种变体：简单版本和格式化版本。"}),"\n",(0,l.jsxs)(n.h4,{id:"trace-级别",children:["Trace 级别",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#trace-级别",children:"#"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"func (l *Logger) Trace(v ...any)\nfunc (l *Logger) Tracef(format string, v ...any)\n"})}),"\n",(0,l.jsx)(n.p,{children:"在 trace 级别记录日志（最详细）。"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"示例："})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'logger.Trace("详细执行追踪")\nlogger.Tracef("处理第 %d 项，共 %d 项", i, total)\n'})}),"\n",(0,l.jsxs)(n.h4,{id:"debug-级别",children:["Debug 级别",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#debug-级别",children:"#"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"func (l *Logger) Debug(v ...any)\nfunc (l *Logger) Debugf(format string, v ...any)\n"})}),"\n",(0,l.jsx)(n.p,{children:"在 debug 级别记录开发信息。"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"示例："})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'logger.Debug("变量状态:", variable)\nlogger.Debugf("用户 %s 认证成功", username)\n'})}),"\n",(0,l.jsxs)(n.h4,{id:"info-级别",children:["Info 级别",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#info-级别",children:"#"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"func (l *Logger) Info(v ...any)\nfunc (l *Logger) Infof(format string, v ...any)\n"})}),"\n",(0,l.jsx)(n.p,{children:"记录信息性消息。"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"示例："})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'logger.Info("应用程序已启动")\nlogger.Infof("服务器监听端口 %d", port)\n'})}),"\n",(0,l.jsxs)(n.h4,{id:"warn-级别",children:["Warn 级别",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#warn-级别",children:"#"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"func (l *Logger) Warn(v ...any)\nfunc (l *Logger) Warnf(format string, v ...any)\n"})}),"\n",(0,l.jsx)(n.p,{children:"记录警告消息，用于潜在问题情况。"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"示例："})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'logger.Warn("已调用弃用函数")\nlogger.Warnf("内存使用率高: %d%%", memoryPercent)\n'})}),"\n",(0,l.jsxs)(n.h4,{id:"error-级别",children:["Error 级别",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#error-级别",children:"#"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"func (l *Logger) Error(v ...any)\nfunc (l *Logger) Errorf(format string, v ...any)\n"})}),"\n",(0,l.jsx)(n.p,{children:"记录错误消息。"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"示例："})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'logger.Error("数据库连接失败")\nlogger.Errorf("处理请求失败: %v", err)\n'})}),"\n",(0,l.jsxs)(n.h4,{id:"fatal-级别",children:["Fatal 级别",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#fatal-级别",children:"#"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"func (l *Logger) Fatal(v ...any)\nfunc (l *Logger) Fatalf(format string, v ...any)\n"})}),"\n",(0,l.jsxs)(n.p,{children:["记录致命错误并调用 ",(0,l.jsx)(n.code,{children:"os.Exit(1)"}),"。"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"示例："})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'logger.Fatal("关键系统错误")\nlogger.Fatalf("无法启动服务器: %v", err)\n'})}),"\n",(0,l.jsxs)(n.h4,{id:"panic-级别",children:["Panic 级别",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#panic-级别",children:"#"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"func (l *Logger) Panic(v ...any)\nfunc (l *Logger) Panicf(format string, v ...any)\n"})}),"\n",(0,l.jsxs)(n.p,{children:["记录错误消息并调用 ",(0,l.jsx)(n.code,{children:"panic()"}),"。"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"示例："})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'logger.Panic("发生不可恢复错误")\nlogger.Panicf("无效状态: %v", state)\n'})}),"\n",(0,l.jsxs)(n.h3,{id:"实用方法",children:["实用方法",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#实用方法",children:"#"})]}),"\n",(0,l.jsxs)(n.h4,{id:"clone",children:["Clone",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#clone",children:"#"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"func (l *Logger) Clone() *Logger\n"})}),"\n",(0,l.jsx)(n.p,{children:"创建具有相同配置的日志记录器副本。"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"返回值："})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"*Logger"}),"：具有复制设置的新日志记录器实例"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"示例："})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'dbLogger := logger.Clone()\ndbLogger.SetPrefixMsg("[DB] ")\n'})}),"\n",(0,l.jsxs)(n.h4,{id:"clonetoctx",children:["CloneToCtx",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#clonetoctx",children:"#"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"func (l *Logger) CloneToCtx() LoggerWithCtx\n"})}),"\n",(0,l.jsxs)(n.p,{children:["创建一个上下文感知的日志记录器，接受 ",(0,l.jsx)(n.code,{children:"context.Context"})," 作为第一个参数。"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"返回值："})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"LoggerWithCtx"}),"：上下文感知的日志记录器实例"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"示例："})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'ctxLogger := logger.CloneToCtx()\nctxLogger.Info(ctx, "上下文感知消息")\n'})}),"\n",(0,l.jsxs)(n.h2,{id:"全局函数",children:["全局函数",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#全局函数",children:"#"})]}),"\n",(0,l.jsx)(n.p,{children:"使用默认全局日志记录器的包级函数。"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"func SetLevel(level Level)\nfunc SetOutput(writers ...io.Writer)\nfunc SetFormatter(formatter Format)\nfunc Caller(enabled bool)\n\nfunc Trace(v ...any)\nfunc Tracef(format string, v ...any)\nfunc Debug(v ...any)\nfunc Debugf(format string, v ...any)\nfunc Info(v ...any)\nfunc Infof(format string, v ...any)\nfunc Warn(v ...any)\nfunc Warnf(format string, v ...any)\nfunc Error(v ...any)\nfunc Errorf(format string, v ...any)\nfunc Fatal(v ...any)\nfunc Fatalf(format string, v ...any)\nfunc Panic(v ...any)\nfunc Panicf(format string, v ...any)\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"示例："})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'import "github.com/lazygophers/log"\n\nlog.SetLevel(log.InfoLevel)\nlog.Info("使用全局日志记录器")\n'})}),"\n",(0,l.jsxs)(n.h2,{id:"日志级别",children:["日志级别",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#日志级别",children:"#"})]}),"\n",(0,l.jsxs)(n.h3,{id:"level-类型",children:["Level 类型",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#level-类型",children:"#"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"type Level int8\n"})}),"\n",(0,l.jsxs)(n.h3,{id:"可用级别",children:["可用级别",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#可用级别",children:"#"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"const (\n    PanicLevel Level = iota  // 0 - Panic 并退出\n    FatalLevel              // 1 - 致命错误并退出\n    ErrorLevel              // 2 - 错误条件\n    WarnLevel               // 3 - 警告条件\n    InfoLevel               // 4 - 信息性消息\n    DebugLevel              // 5 - 调试消息\n    TraceLevel              // 6 - 最详细的追踪\n)\n"})}),"\n",(0,l.jsxs)(n.h3,{id:"level-方法",children:["Level 方法",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#level-方法",children:"#"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"func (l Level) String() string\n"})}),"\n",(0,l.jsx)(n.p,{children:"返回级别的字符串表示。"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"示例："})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'fmt.Println(log.InfoLevel.String())  // "INFO"\n'})}),"\n",(0,l.jsxs)(n.h2,{id:"格式化器",children:["格式化器",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#格式化器",children:"#"})]}),"\n",(0,l.jsxs)(n.h3,{id:"format-接口",children:["Format 接口",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#format-接口",children:"#"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"type Format interface {\n    Format(entry *Entry) []byte\n}\n"})}),"\n",(0,l.jsx)(n.p,{children:"自定义格式化器必须实现此接口。"}),"\n",(0,l.jsxs)(n.h3,{id:"默认格式化器",children:["默认格式化器",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#默认格式化器",children:"#"})]}),"\n",(0,l.jsx)(n.p,{children:"具有可自定义选项的内置文本格式化器。"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"type Formatter struct {\n    // 配置选项\n}\n"})}),"\n",(0,l.jsxs)(n.h3,{id:"json-格式化器示例",children:["JSON 格式化器示例",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#json-格式化器示例",children:"#"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'type JSONFormatter struct{}\n\nfunc (f *JSONFormatter) Format(entry *Entry) []byte {\n    data := map[string]interface{}{\n        "timestamp": entry.Time.Format(time.RFC3339),\n        "level":     entry.Level.String(),\n        "message":   entry.Message,\n        "caller":    fmt.Sprintf("%s:%d", entry.CallerFile, entry.CallerLine),\n    }\n    if entry.TraceID != "" {\n        data["trace_id"] = entry.TraceID\n    }\n\n    jsonData, _ := json.Marshal(data)\n    return append(jsonData, \'\\n\')\n}\n\n// 使用\nlogger.SetFormatter(&JSONFormatter{})\n'})}),"\n",(0,l.jsxs)(n.h2,{id:"输出写入器",children:["输出写入器",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#输出写入器",children:"#"})]}),"\n",(0,l.jsxs)(n.h3,{id:"文件输出与轮转",children:["文件输出与轮转",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#文件输出与轮转",children:"#"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"func GetOutputWriterHourly(filename string) io.Writer\n"})}),"\n",(0,l.jsx)(n.p,{children:"创建一个每小时轮转日志文件的写入器。"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"参数："})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"filename"}),"：日志文件的基础文件名"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"返回值："})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"io.Writer"}),"：轮转文件写入器"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"示例："})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'writer := log.GetOutputWriterHourly("./logs/app.log")\nlogger.SetOutput(writer)\n// 创建类似的文件：app-2024010115.log, app-2024010116.log 等\n'})}),"\n",(0,l.jsxs)(n.h3,{id:"异步写入器",children:["异步写入器",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#异步写入器",children:"#"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"func NewAsyncWriter(writer io.Writer, bufferSize int) *AsyncWriter\n"})}),"\n",(0,l.jsx)(n.p,{children:"为高性能日志记录创建异步写入器。"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"参数："})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"writer"}),"：底层写入器"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"bufferSize"}),"：内部缓冲区大小"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"返回值："})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"*AsyncWriter"}),"：异步写入器实例"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"方法："})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"func (aw *AsyncWriter) Write(data []byte) (int, error)\nfunc (aw *AsyncWriter) Close() error\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"示例："})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'file, _ := os.Create("app.log")\nasyncWriter := log.NewAsyncWriter(file, 1000)\ndefer asyncWriter.Close()\n\nlogger.SetOutput(asyncWriter)\n'})}),"\n",(0,l.jsxs)(n.h2,{id:"上下文日志",children:["上下文日志",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#上下文日志",children:"#"})]}),"\n",(0,l.jsxs)(n.h3,{id:"loggerwithctx-接口",children:["LoggerWithCtx 接口",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#loggerwithctx-接口",children:"#"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"type LoggerWithCtx interface {\n    Trace(ctx context.Context, v ...any)\n    Tracef(ctx context.Context, format string, v ...any)\n    Debug(ctx context.Context, v ...any)\n    Debugf(ctx context.Context, format string, v ...any)\n    Info(ctx context.Context, v ...any)\n    Infof(ctx context.Context, format string, v ...any)\n    Warn(ctx context.Context, v ...any)\n    Warnf(ctx context.Context, format string, v ...any)\n    Error(ctx context.Context, v ...any)\n    Errorf(ctx context.Context, format string, v ...any)\n    Fatal(ctx context.Context, v ...any)\n    Fatalf(ctx context.Context, format string, v ...any)\n    Panic(ctx context.Context, v ...any)\n    Panicf(ctx context.Context, format string, v ...any)\n}\n"})}),"\n",(0,l.jsxs)(n.h3,{id:"上下文函数",children:["上下文函数",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#上下文函数",children:"#"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"func SetTrace(traceID string)\nfunc GetTrace() string\n"})}),"\n",(0,l.jsx)(n.p,{children:"设置和获取当前 goroutine 的追踪 ID。"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"示例："})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'log.SetTrace("trace-123-456")\nlog.Info("此消息将包含追踪 ID")\n\ntraceID := log.GetTrace()\nfmt.Println("当前追踪 ID:", traceID)\n'})}),"\n",(0,l.jsxs)(n.h2,{id:"构建标签",children:["构建标签",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#构建标签",children:"#"})]}),"\n",(0,l.jsx)(n.p,{children:"该库支持使用构建标签进行条件编译："}),"\n",(0,l.jsxs)(n.h3,{id:"默认模式",children:["默认模式",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#默认模式",children:"#"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"go build\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"启用完整功能"}),"\n",(0,l.jsx)(n.li,{children:"包含调试消息"}),"\n",(0,l.jsx)(n.li,{children:"标准性能"}),"\n"]}),"\n",(0,l.jsxs)(n.h3,{id:"调试模式",children:["调试模式",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#调试模式",children:"#"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"go build -tags debug\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"增强的调试信息"}),"\n",(0,l.jsx)(n.li,{children:"额外的运行时检查"}),"\n",(0,l.jsx)(n.li,{children:"详细的调用者信息"}),"\n"]}),"\n",(0,l.jsxs)(n.h3,{id:"发布模式",children:["发布模式",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#发布模式",children:"#"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"go build -tags release\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"为生产环境优化"}),"\n",(0,l.jsx)(n.li,{children:"调试消息被禁用"}),"\n",(0,l.jsx)(n.li,{children:"启用自动日志轮转"}),"\n"]}),"\n",(0,l.jsxs)(n.h3,{id:"丢弃模式",children:["丢弃模式",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#丢弃模式",children:"#"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"go build -tags discard\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"最大性能"}),"\n",(0,l.jsx)(n.li,{children:"所有日志操作都是空操作"}),"\n",(0,l.jsx)(n.li,{children:"零开销"}),"\n"]}),"\n",(0,l.jsxs)(n.h3,{id:"组合模式",children:["组合模式",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#组合模式",children:"#"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'go build -tags "debug,discard"    # 调试与丢弃\ngo build -tags "release,discard"  # 发布与丢弃\n'})}),"\n",(0,l.jsxs)(n.h2,{id:"性能优化",children:["性能优化",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#性能优化",children:"#"})]}),"\n",(0,l.jsxs)(n.h3,{id:"对象池",children:["对象池",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#对象池",children:"#"})]}),"\n",(0,l.jsxs)(n.p,{children:["该库在内部使用 ",(0,l.jsx)(n.code,{children:"sync.Pool"})," 来管理："]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"日志条目对象"}),"\n",(0,l.jsx)(n.li,{children:"字节缓冲区"}),"\n",(0,l.jsx)(n.li,{children:"格式化器缓冲区"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"这减少了高吞吐量场景下的垃圾收集压力。"}),"\n",(0,l.jsxs)(n.h3,{id:"级别检查",children:["级别检查",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#级别检查",children:"#"})]}),"\n",(0,l.jsx)(n.p,{children:"日志级别检查发生在昂贵操作之前："}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'// 高效 - 仅当级别启用时才进行消息格式化\nlogger.Debugf("昂贵操作结果: %+v", expensiveCall())\n\n// 在生产环境中调试被禁用时效率较低\nresult := expensiveCall()\nlogger.Debug("结果:", result)\n'})}),"\n",(0,l.jsxs)(n.h3,{id:"异步写入",children:["异步写入",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#异步写入",children:"#"})]}),"\n",(0,l.jsx)(n.p,{children:"对于高吞吐量应用程序："}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"asyncWriter := log.NewAsyncWriter(file, 10000)  // 大缓冲区\nlogger.SetOutput(asyncWriter)\ndefer asyncWriter.Close()\n"})}),"\n",(0,l.jsxs)(n.h3,{id:"构建标签优化",children:["构建标签优化",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#构建标签优化",children:"#"})]}),"\n",(0,l.jsx)(n.p,{children:"根据环境使用适当的构建标签："}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"开发：默认或调试标签"}),"\n",(0,l.jsx)(n.li,{children:"生产：发布标签"}),"\n",(0,l.jsx)(n.li,{children:"性能关键：丢弃标签"}),"\n"]}),"\n",(0,l.jsxs)(n.h2,{id:"示例",children:["示例",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#示例",children:"#"})]}),"\n",(0,l.jsxs)(n.h3,{id:"基本用法",children:["基本用法",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#基本用法",children:"#"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "github.com/lazygophers/log"\n)\n\nfunc main() {\n    log.SetLevel(log.InfoLevel)\n    log.Info("应用程序启动中")\n    log.Warn("这是一个警告")\n    log.Error("这是一个错误")\n}\n'})}),"\n",(0,l.jsxs)(n.h3,{id:"自定义日志记录器",children:["自定义日志记录器",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#自定义日志记录器",children:"#"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "os"\n    "github.com/lazygophers/log"\n)\n\nfunc main() {\n    logger := log.New()\n\n    // 配置日志记录器\n    logger.SetLevel(log.DebugLevel)\n    logger.Caller(true)\n    logger.SetPrefixMsg("[MyApp] ")\n\n    // 设置输出到文件\n    file, err := os.Create("app.log")\n    if err != nil {\n        log.Fatal(err)\n    }\n    defer file.Close()\n\n    logger.SetOutput(file)\n\n    logger.Info("自定义日志记录器已配置")\n    logger.Debug("带调用者的调试信息")\n}\n'})}),"\n",(0,l.jsxs)(n.h3,{id:"高性能日志记录",children:["高性能日志记录",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#高性能日志记录",children:"#"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "os"\n    "github.com/lazygophers/log"\n)\n\nfunc main() {\n    // 创建轮转文件写入器\n    writer := log.GetOutputWriterHourly("./logs/app.log")\n\n    // Wrap with async writer for performance\n    asyncWriter := log.NewAsyncWriter(writer, 5000)\n    defer asyncWriter.Close()\n\n    logger := log.New()\n    logger.SetOutput(asyncWriter)\n    logger.SetLevel(log.InfoLevel)  // Skip debug in production\n\n    // High-throughput logging\n    for i := 0; i < 10000; i++ {\n        logger.Infof("Processing request %d", i)\n    }\n}\n'})}),"\n",(0,l.jsxs)(n.h3,{id:"上下文感知日志记录",children:["上下文感知日志记录",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#上下文感知日志记录",children:"#"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "context"\n    "github.com/lazygophers/log"\n)\n\nfunc main() {\n    logger := log.New()\n    ctxLogger := logger.CloneToCtx()\n\n    ctx := context.Background()\n    log.SetTrace("trace-123-456")\n\n    ctxLogger.Info(ctx, "处理用户请求")\n    ctxLogger.Debug(ctx, "验证完成")\n}\n'})}),"\n",(0,l.jsxs)(n.h3,{id:"自定义-json-格式化器",children:["自定义 JSON 格式化器",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#自定义-json-格式化器",children:"#"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "encoding/json"\n    "os"\n    "time"\n    "github.com/lazygophers/log"\n)\n\ntype JSONFormatter struct{}\n\nfunc (f *JSONFormatter) Format(entry *log.Entry) []byte {\n    data := map[string]interface{}{\n        "timestamp": entry.Time.Format(time.RFC3339Nano),\n        "level":     entry.Level.String(),\n        "message":   entry.Message,\n        "pid":       entry.Pid,\n        "gid":       entry.Gid,\n    }\n\n    if entry.TraceID != "" {\n        data["trace_id"] = entry.TraceID\n    }\n\n    if entry.CallerName != "" {\n        data["caller"] = map[string]interface{}{\n            "function": entry.CallerName,\n            "file":     entry.CallerFile,\n            "line":     entry.CallerLine,\n        }\n    }\n\n    jsonData, _ := json.MarshalIndent(data, "", "  ")\n    return append(jsonData, \'\\n\')\n}\n\nfunc main() {\n    logger := log.New()\n    logger.SetFormatter(&JSONFormatter{})\n    logger.Caller(true)\n    logger.SetOutput(os.Stdout)\n\n    log.SetTrace("request-456")\n    logger.Info("JSON格式化消息")\n}\n'})}),"\n",(0,l.jsxs)(n.h2,{id:"错误处理",children:["错误处理",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#错误处理",children:"#"})]}),"\n",(0,l.jsx)(n.p,{children:"出于性能考虑，大多数日志记录器方法不返回错误。如果您需要对输出操作进行错误处理，请实现自定义写入器："}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"type ErrorCapturingWriter struct {\n    writer io.Writer\n    lastError error\n}\n\nfunc (w *ErrorCapturingWriter) Write(data []byte) (int, error) {\n    n, err := w.writer.Write(data)\n    if err != nil {\n        w.lastError = err\n    }\n    return n, err\n}\n\nfunc (w *ErrorCapturingWriter) LastError() error {\n    return w.lastError\n}\n"})}),"\n",(0,l.jsxs)(n.h2,{id:"线程安全",children:["线程安全",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#线程安全",children:"#"})]}),"\n",(0,l.jsx)(n.p,{children:"所有日志记录器操作都是线程安全的，可以在多个 goroutine 中并发使用，无需额外的同步机制。"}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsxs)(n.h2,{id:"-多语言文档",children:["\uD83C\uDF0D 多语言文档",(0,l.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#-多语言文档",children:"#"})]}),"\n",(0,l.jsx)(n.p,{children:"本文档提供多种语言版本："}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"/API",children:"\uD83C\uDDFA\uD83C\uDDF8 English"})}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"/API_zh-CN",children:"\uD83C\uDDE8\uD83C\uDDF3 简体中文"})," (当前)"]}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"/API_zh-TW",children:"\uD83C\uDDF9\uD83C\uDDFC 繁體中文"})}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"LazyGophers Log 完整 API 参考 - 使用卓越的日志记录构建更好的应用程序！\uD83D\uDE80"})})]})}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,s.ah)(),e.components);return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}let d=i;i.__RSPRESS_PAGE_META={},i.__RSPRESS_PAGE_META["zh-CN%2FAPI.md"]={toc:[{text:"概述",id:"概述",depth:2},{text:"目录",id:"目录",depth:2},{text:"核心类型",id:"核心类型",depth:2},{text:"Logger",id:"logger",depth:3},{text:"构造函数",id:"构造函数",depth:4},{text:"Entry",id:"entry",depth:3},{text:"Logger API",id:"logger-api",depth:2},{text:"配置方法",id:"配置方法",depth:3},{text:"SetLevel",id:"setlevel",depth:4},{text:"SetOutput",id:"setoutput",depth:4},{text:"SetFormatter",id:"setformatter",depth:4},{text:"Caller",id:"caller",depth:4},{text:"SetCallerDepth",id:"setcallerdepth",depth:4},{text:"SetPrefixMsg / SetSuffixMsg",id:"setprefixmsg--setsuffixmsg",depth:4},{text:"日志记录方法",id:"日志记录方法",depth:3},{text:"Trace 级别",id:"trace-级别",depth:4},{text:"Debug 级别",id:"debug-级别",depth:4},{text:"Info 级别",id:"info-级别",depth:4},{text:"Warn 级别",id:"warn-级别",depth:4},{text:"Error 级别",id:"error-级别",depth:4},{text:"Fatal 级别",id:"fatal-级别",depth:4},{text:"Panic 级别",id:"panic-级别",depth:4},{text:"实用方法",id:"实用方法",depth:3},{text:"Clone",id:"clone",depth:4},{text:"CloneToCtx",id:"clonetoctx",depth:4},{text:"全局函数",id:"全局函数",depth:2},{text:"日志级别",id:"日志级别",depth:2},{text:"Level 类型",id:"level-类型",depth:3},{text:"可用级别",id:"可用级别",depth:3},{text:"Level 方法",id:"level-方法",depth:3},{text:"格式化器",id:"格式化器",depth:2},{text:"Format 接口",id:"format-接口",depth:3},{text:"默认格式化器",id:"默认格式化器",depth:3},{text:"JSON 格式化器示例",id:"json-格式化器示例",depth:3},{text:"输出写入器",id:"输出写入器",depth:2},{text:"文件输出与轮转",id:"文件输出与轮转",depth:3},{text:"异步写入器",id:"异步写入器",depth:3},{text:"上下文日志",id:"上下文日志",depth:2},{text:"LoggerWithCtx 接口",id:"loggerwithctx-接口",depth:3},{text:"上下文函数",id:"上下文函数",depth:3},{text:"构建标签",id:"构建标签",depth:2},{text:"默认模式",id:"默认模式",depth:3},{text:"调试模式",id:"调试模式",depth:3},{text:"发布模式",id:"发布模式",depth:3},{text:"丢弃模式",id:"丢弃模式",depth:3},{text:"组合模式",id:"组合模式",depth:3},{text:"性能优化",id:"性能优化",depth:2},{text:"对象池",id:"对象池",depth:3},{text:"级别检查",id:"级别检查",depth:3},{text:"异步写入",id:"异步写入",depth:3},{text:"构建标签优化",id:"构建标签优化",depth:3},{text:"示例",id:"示例",depth:2},{text:"基本用法",id:"基本用法",depth:3},{text:"自定义日志记录器",id:"自定义日志记录器",depth:3},{text:"高性能日志记录",id:"高性能日志记录",depth:3},{text:"上下文感知日志记录",id:"上下文感知日志记录",depth:3},{text:"自定义 JSON 格式化器",id:"自定义-json-格式化器",depth:3},{text:"错误处理",id:"错误处理",depth:2},{text:"线程安全",id:"线程安全",depth:2},{text:"\uD83C\uDF0D 多语言文档",id:"-多语言文档",depth:2}],title:"\uD83D\uDCDA API Documentation",headingTitle:"\uD83D\uDCDA API Documentation",frontmatter:{}}}}]);